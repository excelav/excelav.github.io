webpackJsonp([1],{"09ID":function(e,t){},"9n10":function(e,t){},M57x:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),r=n("Dd8w"),a=n.n(r),s={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"header-left"},[this._v("LIBRARY")]),this._v(" "),t("div",{staticClass:"header-right"})])}]};var i=n("VU/8")({name:"HomeHeader",data:function(){return{}}},s,!1,function(e){n("M57x")},"data-v-00c53854",null).exports,l={name:"HomeNavMenu",data:function(){return{}},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.$route.path,router:"","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{open:e.handleOpen,close:e.handleClose}},[n("el-menu-item",{attrs:{index:"/table"}},[n("i",{staticClass:"el-icon-location"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("导航一")])]),e._v(" "),n("el-menu-item",{attrs:{index:"/form"}},[n("i",{staticClass:"el-icon-menu"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("导航二")])]),e._v(" "),n("el-menu-item",{attrs:{index:"3",disabled:""}},[n("i",{staticClass:"el-icon-document"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("导航三")])]),e._v(" "),n("el-menu-item",{attrs:{index:"4"}},[n("i",{staticClass:"el-icon-setting"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("导航四")])]),e._v(" "),n("el-submenu",{attrs:{index:"5"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-location"}),e._v(" "),n("span",{staticStyle:{"font-size":"18px"}},[e._v("导航五")])]),e._v(" "),n("el-menu-item",{attrs:{index:"5-1"}},[e._v("选项1")]),e._v(" "),n("el-menu-item",{attrs:{index:"5-2"}},[e._v("选项2")])],2)],1)},staticRenderFns:[]};var u=n("VU/8")(l,c,!1,function(e){n("qSvl")},"data-v-442d0b53",null).exports,d={indexedDB:window.indexedDB||window.webkitindexedDB||window.msIndexedDB||mozIndexedDB,openDB:function(e,t,n,o,r){t=t||1;var a=this.indexedDB.open(e,t);a.onerror=function(e){console.log("IndexedDB数据库打开错误")},a.onsuccess=function(e){n=e.target.result,r&&"function"==typeof r&&r(n)},a.onupgradeneeded=function(e){var t=e.target.result;if(o&&!t.objectStoreNames.contains(o.name)){var n=t.createObjectStore(o.name,{keyPath:o.key,autoIncrement:!0});if(o.indexs&&o.indexs instanceof Array)for(var r=o.indexs,a=0,s=r.length;a<s;a++)n.createIndex(r[a],r[a],{unique:!1})}}},deleteDB:function(e,t){var n=this.indexedDB.deleteDatabase(e);n.onerror=function(){console.log("删除数据库出错")},n.onsuccess=function(){t&&"function"==typeof t&&t()}},closeDB:function(e){e.close(),console.log("数据库已关闭")},addData:function(e,t,n,o){for(var r,a=e.transaction(t,"readwrite").objectStore(t),s=0,i=n.length;s<i;s++)(r=a.add(n[s])).onerror=function(){console.error("ADD添加数据报错")},r.onsuccess=function(){o&&"function"==typeof o&&o()}},putData:function(e,t,n,o){for(var r,a=e.transaction(t,"readwrite").objectStore(t),s=0,i=n.length;s<i;s++)(r=a.put(n[s])).onerror=function(){console.error("PUT添加数据报错")},r.onsuccess=function(){o&&"function"==typeof o&&o()}},deleteData:function(e,t,n,o){var r=e.transaction(t,"readwrite").objectStore(t).delete(n);r.onerror=function(){console.error("删除一条记录出错")},r.onsuccess=function(){o&&"function"==typeof o&&o()}},clearData:function(e,t){e.transaction(t,"readwrite").objectStore(t).clear()},getData:function(e,t,n,o){var r;(r=e.transaction(t,"readonly").objectStore(t).get(n)).onerror=function(){console.log("通过KEY获取数据报错")},r.onsuccess=function(e){var t=e.target.result;o&&"function"==typeof o&&o(t)}},handleDataByCursor:function(e,t,n,o){var r;o=o||"";(r=e.transaction(t,"readwrite").objectStore(t).openCursor(o)).onerror=function(){console.log("通过游标获取数据报错")},r.onsuccess=function(e){var t=e.target.result;t&&(n&&"function"==typeof n&&n(t),t.continue())}},handleDataByIndex:function(e,t,n,o,r){var a;r=r||"";(a=e.transaction(t,"readwrite").objectStore(t).index(sursorIndex).openCursor(r)).onerror=function(){console.log("通过索引游标获取数据报错")},a.onsuccess=function(e){var t=e.target.result;t&&(o&&"function"==typeof o&&o(t),t.continue())}},createCursorIndex:function(e,t,n,o){e.transaction(t,"readwrite").objectStore(t).createIndex(n,n,{unique:!1}),o&&"function"==typeof o&&o()},tranverseDataByCursor:function(e,t,n){var o=e.transaction(t,"readwrite").objectStore(t).openCursor();o.onerror=function(){console.log("通过key游标遍历数据报错")},o.onsuccess=function(e){var t=e.target.result;t&&(n&&"function"==typeof n&&n(t),t.continue())}},addRecord:function(e,t,n,o){var r=e.transaction(t,"readwrite").objectStore(t),a=r.add(n);a.onerror=function(){console.log("添加记录失败")},a.onsuccess=function(e){var t=e.target.result;r.get(t).onsuccess=function(e){var t=e.target.result;o&&"function"==typeof o&&o(t)}}}},m=n("NYxO"),f={name:"Home",components:{HomeHeader:i,HomeNavMenu:u},methods:a()({},Object(m.b)(["addData"])),created:function(){var e=this,t={name:"books",key:"id",indexs:["name","isbn"]};d.openDB("wBooks",1,null,t,function(n){var o=n;d.tranverseDataByCursor(o,t.name,function(t){e.addData(t.value)})})}},p={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",[t("el-header",{attrs:{height:"50px"}},[t("home-header")],1),this._v(" "),t("el-container",[t("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)",overflow:"hidden"},attrs:{width:"200px"}},[t("home-nav-menu")],1),this._v(" "),t("el-main",[t("keep-alive",{attrs:{include:"Table"}},[t("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var v=n("VU/8")(f,p,!1,function(e){n("xoyK")},"data-v-476c810e",null).exports,h={name:"App",components:{Home:v}},b={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("home")],1)},staticRenderFns:[]};var g=n("VU/8")(h,b,!1,function(e){n("oek1")},null,null).exports,_=n("/ocq"),k={name:"Table",data:function(){return{search:""}},computed:a()({},Object(m.d)(["allBooks","currentBook"]),{tables:function(){var e=this.search;return e?this.allBooks.filter(function(t){return String(t.name).toLowerCase().indexOf(e)>-1}):this.allBooks}}),methods:a()({},Object(m.b)(["deleteData"]),Object(m.c)(["changeCurrentBook"]),{handleClick:function(e){this.changeCurrentBook(e.id)},showDate:function(e){return""!==this.search&&-1!==e.indexOf(this.search)?e.replace(this.search,'<font color="#409EFF">'+this.search+"</font>"):e},deleteRecord:function(){var e=this;this.currentBook&&this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then(function(){var t=e,n={name:"books",key:"id",indexs:["name","isbn"],id:t.currentBook};d.openDB("wBooks",1,null,n,function(e){var t=e;d.deleteData(t,n.name,n.id,function(){console.log("数据库中数据删除成功")})}),t.deleteData(),e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}})},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-input",{staticClass:"search",staticStyle:{width:"300px"},attrs:{"prefix-icon":"el-icon-search",placeholder:"输入书名进行查询",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),n("el-button",{attrs:{type:"warning",plain:""},on:{click:e.deleteRecord}},[e._v("删除选中记录")])],1),e._v(" "),n("el-table",{staticClass:"datatable",attrs:{data:e.tables,border:"","highlight-current-row":"","max-height":"565"},on:{"row-click":e.handleClick}},[n("el-table-column",{attrs:{prop:"id",label:"ID",width:"70"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"书名",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{domProps:{innerHTML:e._s(e.showDate(t.row.name))}})]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"position",label:"存放位置",width:"160"}}),e._v(" "),n("el-table-column",{attrs:{prop:"type",label:"类型",width:"120"}}),e._v(" "),n("el-table-column",{attrs:{prop:"isbn",label:"ISBN",width:"130"}}),e._v(" "),n("el-table-column",{attrs:{prop:"date",label:"入库日期",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"remarks",label:"备注"}})],1)],1)},staticRenderFns:[]};var x=n("VU/8")(k,y,!1,function(e){n("09ID")},"data-v-7d98be9f",null).exports,B={name:"Form",data:function(){return{ruleForm:{name:"",position:"办公室",type:"工作类",isbn:"",date:"2019-01-25",remarks:""},rules:{name:[{required:!0,message:"请输入书籍名称",trigger:"blur"}],position:[{required:!0,message:"请选择存放位置",trigger:"change"}],type:[{required:!0,message:"请选择类别",trigger:"change"}],date:[{type:"string",message:"请选择时间",trigger:"change"}]}}},methods:a()({},Object(m.b)(["addData"]),{submitForm:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(t){var n=e,o=n.ruleForm,r={name:"books",key:"id",indexs:["name","isbn"]};d.openDB("wBooks",1,null,r,function(e){var t=e;d.addRecord(t,r.name,o,function(e){n.addData(e),n.$message({message:"添加书籍成功",type:"success"})})})}})},resetForm:function(e){this.$refs[e].resetFields()}})},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"resource"},[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"书籍名称",prop:"name"}},[n("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"存放位置",prop:"position"}},[n("el-radio-group",{model:{value:e.ruleForm.position,callback:function(t){e.$set(e.ruleForm,"position",t)},expression:"ruleForm.position"}},[n("el-radio",{attrs:{label:"办公室"}}),e._v(" "),n("el-radio",{attrs:{label:"家"}}),e._v(" "),n("el-radio",{attrs:{label:"其他"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"书籍类别",prop:"type"}},[n("el-radio-group",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[n("el-radio",{attrs:{label:"工作类",name:"type"}}),e._v(" "),n("el-radio",{attrs:{label:"技术",name:"type"}}),e._v(" "),n("el-radio",{attrs:{label:"文学",name:"type"}}),e._v(" "),n("el-radio",{attrs:{label:"其他",name:"type"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"ISBN",prop:"isbn"}},[n("el-input",{attrs:{autocomplete:"off",placeholder:"13位数字"},model:{value:e.ruleForm.isbn,callback:function(t){e.$set(e.ruleForm,"isbn",e._n(t))},expression:"ruleForm.isbn"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"入库日期",prop:"date"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.ruleForm.date,callback:function(t){e.$set(e.ruleForm,"date",t)},expression:"ruleForm.date"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.remarks,callback:function(t){e.$set(e.ruleForm,"remarks",t)},expression:"ruleForm.remarks"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("新增书籍")]),e._v(" "),n("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var D=n("VU/8")(B,w,!1,function(e){n("Noae")},"data-v-39d4c2fa",null).exports;o.default.use(_.a);var F=new _.a({routes:[{path:"/",name:"Home",component:v},{path:"/table",name:"Table",component:x},{path:"/form",name:"Form",component:D}]});o.default.use(m.a);var C=new m.a.Store({state:{allBooks:[],currentBook:""},getters:{},mutations:{pushBooks:function(e,t){e.allBooks.push(t)},changeCurrentBook:function(e,t){e.currentBook=t},deleteCurrentBook:function(e){var t=e.currentBook,n=void 0;e.currentBook="";for(var o=0,r=e.allBooks.length;o<r;o++)if(e.allBooks[o].id===t){n=o;break}n&&e.allBooks.splice(n,1)}},actions:{addData:function(e,t){e.commit("pushBooks",t)},deleteData:function(e){e.commit("deleteCurrentBook")}}}),S=n("zL8q"),$=n.n(S);n("tvR6");o.default.use($.a);n("9n10");o.default.config.productionTip=!1,new o.default({el:"#app",router:F,store:C,components:{App:g},template:"<App/>"})},Noae:function(e,t){},oek1:function(e,t){},qSvl:function(e,t){},tvR6:function(e,t){},xoyK:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.ba6e97a16759d46eae57.js.map